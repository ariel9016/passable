!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).passable=t()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function t(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function e(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function r(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function i(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=["warn","fail"],u=function(){function r(n){if(t(this,r),n){if(!r.is(n))throw new TypeError;if("string"==typeof n||Array.isArray(n)){if(0===n.length)return;this.only=this.populateGroup(this.only,n)}else n.only&&(this.only=this.populateGroup(this.only,n.only)),n.not&&(this.not=this.populateGroup(this.not,n.not))}}var i,o,u;return i=r,u=[{key:"is",value:function(t){return Array.isArray(t)?t.every(function(n){return"string"==typeof n}):"string"==typeof t||!(null===t||"object"!==n(t)||!t.hasOwnProperty("only")&&!t.hasOwnProperty("not"))}}],(o=[{key:"populateGroup",value:function(n,t){return n=n||{},"string"==typeof t?n[t]=!0:Array.isArray(t)&&t.forEach(function(t){return n[t]=!0}),n}},{key:"excludes",value:function(n){return!(!this.only||this.only[n])||!(!this.not||!this.not[n])}}])&&e(i.prototype,o),u&&e(i,u),r}(),s=function(t,e,r){return"[Passable]: failed during suite initialization. Unexpected '".concat(n(e),"' for '").concat(t,"' argument.\n    See: ").concat(r||"https://fiverr.github.io/passable/getting_started/writing_tests.html")},a=function n(e,a,f){var c=this;if(t(this,n),r(this,"pending",[]),r(this,"addPendingTest",function(n){return c.pending.push(n)}),r(this,"clearPendingTest",function(n){c.pending=c.pending.filter(function(t){return t!==n})}),r(this,"hasRemainingPendingTests",function(n){return!!c.pending.length&&(n?c.pending.some(function(t){return t.fieldName===n}):!!c.pending.length)}),r(this,"test",function(n,t,e,r){if(c.specific.excludes(n))c.res.addToSkipped(n);else{var i;if(c.res.initFieldCounters(n),"function"==typeof e)i=c.runTest;else{if(!(e instanceof Promise))return;i=c.addPendingTest}e.fieldName=n,e.statement=t,e.severity=r,i(e)}}),r(this,"runTest",function(n){var t,e=n.fieldName,r=n.statement,i=n.severity;if("function"==typeof n.then){c.res.markAsync(e);var o=function(){c.clearPendingTest(n),c.hasRemainingPendingTests(e)||c.res.markAsDone(e),c.hasRemainingPendingTests()||c.res.markAsDone()},u=function(){c.pending.includes(n)&&c.res.fail(e,r,i),o()};try{n.then(o,u)}catch(n){u()}}else{try{t=n()}catch(n){t=!1}if(t&&"function"==typeof t.then)return t.fieldName=e,t.statement=r,t.severity=i,c.addPendingTest(t);!1===t&&c.res.fail(e,r,i),c.clearPendingTest(n)}c.res.bumpTestCounter(e)}),r(this,"runPendingTests",function(){i(c.pending).forEach(c.runTest)}),"string"!=typeof e)throw new TypeError(s("suite name",e));if("function"!=typeof a)throw new TypeError(s("tests",a));if(f&&!u.is(f))throw new TypeError(s("specific",a,"https://fiverr.github.io/passable/test/specific.html"));this.specific=new u(f),this.res=function(n){var t=[],e=null,r=!1,u=!1,s=!1,a=function(n,t){u=!0,l.warnings[n]=l.warnings[n]||[],l.warnings[n].push(t),l.warnCount++,l.testsPerformed[n].warnCount++},f=function(n,t){r=!0,l.errors[n]=l.errors[n]||[],l.errors[n].push(t),l.failCount++,l.testsPerformed[n].failCount++},c=function(){t.forEach(function(n){return!s&&n(l)})},l={name:n,failCount:0,warnCount:0,testCount:0,testsPerformed:{},errors:{},warnings:{},skipped:[],hasErrors:function(n){return n?Boolean(l.getErrors(n).length):r},hasWarnings:function(n){return n?Boolean(l.getWarnings(n).length):u},getErrors:function(n){return n?l.errors[n]?l.errors[n]:[]:l.errors},getWarnings:function(n){return n?l.warnings[n]?l.warnings[n]:[]:l.warnings},done:function(n){return"function"!=typeof n?l:(e||n(l),t.push(n),l)},after:function(n,t){return"function"!=typeof t?l:(!(e=e||{})[n]&&l.testsPerformed[n]?t(l):e[n]&&(e[n].callbacks=[].concat(i(e[n].callbacks||[]),[t])),l)},cancel:function(){return s=!0,l}};return{initFieldCounters:function(n){if(l.testsPerformed[n])return l;l.testsPerformed[n]={testCount:0,failCount:0,warnCount:0}},bumpTestError:f,bumpTestWarning:a,bumpTestCounter:function(n){if(!l.testsPerformed[n])return l;l.testsPerformed[n].testCount++,l.testCount++},fail:function(n,t,e){if(!l.testsPerformed[n])return l;"warn"===(e&&o.includes(e)?e:"fail")?a(n,t):f(n,t)},addToSkipped:function(n){!l.skipped.includes(n)&&l.skipped.push(n)},runCompletionCallbacks:c,markAsync:function(n){(e=e||{})[n]=e[n]||{},e[n]={done:!1,callbacks:e[n].callbacks||[]}},markAsDone:function(n){if(!n)return c();null!==e&&e[n]&&(e[n].done=!0,e[n].callbacks&&e[n].callbacks.forEach(function(n){return!s&&n(l)}))},output:l}}(e),a(this.test,this.res.output),this.runPendingTests()};function f(n){return Boolean(Array.isArray(n))}function c(n){return Boolean("number"==typeof n)}function l(n){return Boolean("string"==typeof n)}function p(n,t){return t instanceof RegExp?t.test(n):"string"==typeof t&&new RegExp(t).test(n)}function y(t,e){return Array.isArray(e)&&["string","number","boolean"].includes(n(t))?e.includes(t):"string"==typeof e&&"string"==typeof t&&e.includes(t)}function g(n,t){return n===t}function h(n){var t=!isNaN(parseFloat(n))&&!isNaN(Number(n))&&isFinite(n);return Boolean(t)}function d(t){return!t||(h(t)?0===t:t.hasOwnProperty("length")?0===t.length:"object"!==n(t)||0===Object.keys(t).length)}function m(n,t){return h(n)&&h(t)&&Number(n)>Number(t)}function b(n,t){return h(n)&&h(t)&&Number(n)>=Number(t)}function v(n,t){return h(n)&&h(t)&&Number(n)<Number(t)}function w(n,t){return h(n)&&h(t)&&Number(n)<=Number(t)}function T(n,t){return n.length===t}f.negativeForm="isNotArray",c.negativeForm="isNotNumber",l.negativeForm="isNotString",p.negativeForm="notMatches",y.negativeForm="notInside",g.negativeForm="notEquals",h.negativeForm="isNotNumeric",d.negativeForm="isNotEmpty",m.alias="gt",b.alias="gte",v.alias="lt",w.alias="lte",T.negativeForm="lengthNotEquals";var P=function(n){var t=function(t){var e=n[t].negativeForm,r=n[t].alias;e&&(n[e]=function(){return!n[t].apply(n,arguments)}),r&&(n[r]=n[t])};for(var e in n)t(e);return n}({isArray:f,isNumber:c,isString:l,matches:p,inside:y,equals:g,isNumeric:h,isEmpty:d,greaterThan:m,greaterThanOrEquals:b,lessThan:v,lessThanOrEquals:w,longerThan:function(n,t){return n.length>t},longerThanOrEquals:function(n,t){return n.length>=t},shorterThan:function(n,t){return n.length<t},shorterThanOrEquals:function(n,t){return n.length<=t},lengthEquals:T});function E(t,e){if("function"==typeof t){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(!0!==t.apply(void 0,[e].concat(i)))throw new Error("[Enforce]: invalid ".concat(n(e)," value"))}}Function("return this")();var N=function(n,t){return n.hasOwnProperty(t)&&"function"==typeof n[t]},A=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},i=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.forEach(function(t){r(n,t,e[t])})}return n}({},P,n);return"function"==typeof Proxy?function(n){var e=new Proxy(t,{get:function(t,r){if(N(t,r))return function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return E.apply(void 0,[t[r],n].concat(o)),e}}});return e}:function(n){return Object.keys(t).reduce(function(e,r){return N(t,r)?(e[r]=function(){for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return E.apply(void 0,[t[r],n].concat(o)),e},e):e},{})}};function k(n,t,e){return new a(n,t,e).res.output}return k.VERSION="7.0.0",k.enforce=new A({}),k.Enforce=A,k.validate=function(t){if("function"!=typeof t&&!(t instanceof Promise))throw new TypeError("[Validate]: expected ".concat(n(t)," to be a function."));try{return!1!==t()}catch(n){return!1}},k.WARN="warn",k.FAIL="fail",k});
//# sourceMappingURL=passable.min.js.map
